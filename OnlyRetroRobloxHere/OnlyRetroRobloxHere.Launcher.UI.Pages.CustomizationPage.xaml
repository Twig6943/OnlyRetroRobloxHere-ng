<?xml version="1.0" encoding="utf-8"?>
<local:BasePage x:Class="OnlyRetroRobloxHere.Launcher.UI.Pages.CustomizationPage" xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" xmlns:controls="clr-namespace:OnlyRetroRobloxHere.Launcher.UI.Controls" xmlns:converters="clr-namespace:OnlyRetroRobloxHere.Launcher.UI.Converters" xmlns:d="http://schemas.microsoft.com/expression/blend/2008" xmlns:gif="clr-namespace:XamlAnimatedGif;assembly=XamlAnimatedGif" xmlns:local="clr-namespace:OnlyRetroRobloxHere.Launcher.UI.Pages" xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" xmlns:viewmodels="clr-namespace:OnlyRetroRobloxHere.Launcher.UI.ViewModels.Pages" Title="CustomizationPage" FontFamily="Verdana" TextOptions.TextFormattingMode="Display">
  <FrameworkElement.Resources>
    <ResourceDictionary>
      <converters:MembershipToImageUriConverter x:Key="MembershipToImageUriConverter" />
      <converters:FigureCharacterTypeToImageUriConverter x:Key="FigureCharacterTypeToImageUriConverter" />
      <converters:NullVisibilityConverter x:Key="NullVisibilityConverter" />
      <Style x:Key="WardrobeCategoryButton" BasedOn="{StaticResource SelectableButtonNoAnimations}" TargetType="{x:Type controls:SelectableButton}">
        <Setter Property="BorderThickness" Value="0" />
        <Setter Property="Background" Value="#00FFFFFF" />
        <Setter Property="Foreground" Value="#AFCDE0" />
        <Setter Property="Margin" Value="0,0,10,0" />
      </Style>
    </ResourceDictionary>
  </FrameworkElement.Resources>
  <Grid>
    <Grid Margin="10">
      <Grid.ColumnDefinitions>
        <ColumnDefinition Width="0.45*" />
        <ColumnDefinition Width="*" />
      </Grid.ColumnDefinitions>
      <StackPanel Margin="0,0,20,0" VerticalAlignment="Center">
        <controls:StandardBox Margin="0,0,0,5" HeaderText="Player Configuration" HeaderVisibility="Collapsed">
          <StackPanel>
            <TextBlock Style="{StaticResource TextBlockWhite}" Text="User ID" />
            <TextBox Margin="0,0,0,1" Text="{Binding Path=UserId, Mode=TwoWay, Converter={StaticResource StringToIntConverter}}" />
            <TextBlock Style="{StaticResource TextBlockWhite}" Text="Username" />
            <TextBox Text="{Binding Path=Username, Mode=TwoWay}" />
          </StackPanel>
        </controls:StandardBox>
        <controls:StandardBox Margin="0,0,0,5" HeaderText="Preview" HeaderVisibility="Collapsed">
          <StackPanel>
            <Button Width="200" Height="200" Padding="0" Background="#00FFFFFF" BorderThickness="0" SnapsToDevicePixels="True" Style="{StaticResource ButtonNoEffects}" UseLayoutRounding="True" Click="OnRenderClicked">
              <Grid>
                <Image Grid.Column="0" Width="16" Height="16" HorizontalAlignment="Left" VerticalAlignment="Top" Panel.ZIndex="2" gif:AnimationBehavior.SourceUri="pack://application:,,,/OnlyRetroRobloxHere;component/Resources/Launcher/ProgressIndicator.gif" RenderOptions.BitmapScalingMode="HighQuality" Source="pack://application:,,,/OnlyRetroRobloxHere;component/Resources/Launcher/ProgressIndicator.gif" Visibility="{Binding Path=CharacterProgressIndicatorVisible, Mode=OneWay}" />
                <Image RenderOptions.BitmapScalingMode="HighQuality" Source="{Binding Path=CharacterImage, Mode=OneWay}" />
              </Grid>
            </Button>
            <Button Grid.Row="4" Grid.Column="0" HorizontalAlignment="Center" Background="#00FFFFFF" BorderThickness="0" Content="Click here to re-draw!" FontSize="12" Foreground="#AFCDE0" Style="{StaticResource ButtonNoEffects}" Click="OnRedrawClicked" />
          </StackPanel>
        </controls:StandardBox>
        <controls:StandardBox HeaderText="Choose Colors" HeaderVisibility="Collapsed">
          <StackPanel>
            <TextBlock Margin="0,0,0,10" HorizontalAlignment="Center" FontSize="11" Style="{StaticResource TextBlockWhite}" Text="Click a body part to change its color:" />
            <Grid Width="184" Height="240">
              <Button Width="44" Height="44" Margin="72,0,0,0" HorizontalAlignment="Left" VerticalAlignment="Top" Style="{StaticResource ButtonNoEffects}" Tag="Head" Background="{Binding Path=HeadColour, Converter={StaticResource BrickIdToBrushConverter}, Mode=OneWay}" Click="OnCharacterLimbClick" />
              <Button Width="40" Height="88" Margin="0,52,0,0" HorizontalAlignment="Left" VerticalAlignment="Top" Style="{StaticResource ButtonNoEffects}" Tag="RightArm" Background="{Binding Path=RightArmColour, Converter={StaticResource BrickIdToBrushConverter}, Mode=OneWay}" Click="OnCharacterLimbClick" />
              <Button Width="88" Height="88" Margin="48,52,0,0" HorizontalAlignment="Left" VerticalAlignment="Top" Style="{StaticResource ButtonNoEffects}" Tag="Torso" Background="{Binding Path=TorsoColour, Converter={StaticResource BrickIdToBrushConverter}, Mode=OneWay}" Click="OnCharacterLimbClick" />
              <Button Width="40" Height="88" Margin="144,52,0,0" HorizontalAlignment="Left" VerticalAlignment="Top" Style="{StaticResource ButtonNoEffects}" Tag="LeftArm" Background="{Binding Path=LeftArmColour, Converter={StaticResource BrickIdToBrushConverter}, Mode=OneWay}" Click="OnCharacterLimbClick" />
              <Button Width="40" Height="88" Margin="48,146,0,0" HorizontalAlignment="Left" VerticalAlignment="Top" Style="{StaticResource ButtonNoEffects}" Tag="RightLeg" Background="{Binding Path=RightLegColour, Converter={StaticResource BrickIdToBrushConverter}, Mode=OneWay}" Click="OnCharacterLimbClick" />
              <Button Width="40" Height="88" Margin="96,146,0,0" HorizontalAlignment="Left" VerticalAlignment="Top" Style="{StaticResource ButtonNoEffects}" Tag="LeftLeg" Background="{Binding Path=LeftLegColour, Converter={StaticResource BrickIdToBrushConverter}, Mode=OneWay}" Click="OnCharacterLimbClick" />
            </Grid>
            <Button Name="OpenFigureCharacterTypeModal" Width="50" Height="50" Margin="0,-62,-155,0" Padding="0" HorizontalAlignment="Center" Background="#243A4A" BorderBrush="#555555" SnapsToDevicePixels="True" UseLayoutRounding="True" Click="OnOpenFigureCharacterTypeModalClicked">
              <Image RenderOptions.BitmapScalingMode="HighQuality" Source="{Binding Path=FigureCharacterType, Converter={StaticResource FigureCharacterTypeToImageUriConverter}, ConverterParameter=Small, Mode=OneWay}" />
            </Button>
          </StackPanel>
        </controls:StandardBox>
      </StackPanel>
      <Grid Column="1">
        <Grid.RowDefinitions>
          <RowDefinition Height="1.3*" />
          <RowDefinition Height="*" />
        </Grid.RowDefinitions>
        <Grid Row="0">
          <controls:StandardBoxCustomHeader>
            <controls:StandardBoxCustomHeader.HeaderContent>
              <Grid VerticalAlignment="Top">
                <Grid.ColumnDefinitions>
                  <ColumnDefinition Width="*" />
                  <ColumnDefinition Width="*" />
                </Grid.ColumnDefinitions>
                <controls:SelectableButton Click="OnTabClicked" Grid.Column="0" Background="#00FFFFFF" BorderThickness="0" Style="{StaticResource SelectableButtonNoAnimations}" Tag="Wardrobe" IsSelected="{Binding Path=TabWardrobeSelected, Mode=OneWay}">
                  <TextBlock FontSize="16" Foreground="#FFFFFFFF" Text="My Wardrobe" TextAlignment="Center" />
                </controls:SelectableButton>
                <controls:SelectableButton Click="OnTabClicked" Grid.Column="1" Background="#00FFFFFF" BorderThickness="0" Style="{StaticResource SelectableButtonNoAnimations}" Tag="Outfits" IsSelected="{Binding Path=TabOutfitsSelected, Mode=OneWay}">
                  <TextBlock FontSize="16" Foreground="#FFFFFFFF" Text="My Outfits" TextAlignment="Center" />
                </controls:SelectableButton>
              </Grid>
            </controls:StandardBoxCustomHeader.HeaderContent>
            <Grid>
              <Grid Name="MyWardrobeGrid" Visibility="{Binding Path=TabWardrobeSelected, Mode=OneWay, Converter={StaticResource BoolToVisibilityConverter}}">
                <Grid.RowDefinitions>
                  <RowDefinition Height="Auto" />
                  <RowDefinition Height="Auto" />
                  <RowDefinition Height="Auto" />
                  <RowDefinition Height="*" />
                  <RowDefinition Height="Auto" />
                </Grid.RowDefinitions>
                <StackPanel Grid.Row="0" HorizontalAlignment="Center" Orientation="Horizontal">
                  <controls:SelectableButton Click="OnWardrobeCategoryClicked" Content="Heads" Style="{StaticResource WardrobeCategoryButton}" Tag="Head" />
                  <controls:SelectableButton Click="OnWardrobeCategoryClicked" Content="Faces" Style="{StaticResource WardrobeCategoryButton}" Tag="Face" />
                  <controls:SelectableButton Click="OnWardrobeCategoryClicked" Content="Hats" Style="{StaticResource WardrobeCategoryButton}" Tag="Hat" />
                  <controls:SelectableButton x:Name="TShirtButton" Click="OnWardrobeCategoryClicked" Content="T-Shirts" Style="{StaticResource WardrobeCategoryButton}" Tag="TShirt" />
                  <controls:SelectableButton Click="OnWardrobeCategoryClicked" BorderThickness="0" Content="Shirts" Style="{StaticResource WardrobeCategoryButton}" Tag="Shirt" />
                  <controls:SelectableButton Click="OnWardrobeCategoryClicked" BorderThickness="0" Content="Pants" Style="{StaticResource WardrobeCategoryButton}" Tag="Pants" />
                  <controls:SelectableButton Click="OnWardrobeCategoryClicked" Margin="0" BorderThickness="0" Content="Gear" Style="{StaticResource WardrobeCategoryButton}" Tag="Gear" />
                </StackPanel>
                <StackPanel Grid.Row="1" HorizontalAlignment="Center" Orientation="Horizontal">
                  <controls:SelectableButton Click="OnWardrobeCategoryClicked" Content="Torsos" Style="{StaticResource WardrobeCategoryButton}" Tag="Torso" />
                  <controls:SelectableButton Click="OnWardrobeCategoryClicked" Content="L Arms" Style="{StaticResource WardrobeCategoryButton}" Tag="LeftArm" />
                  <controls:SelectableButton Click="OnWardrobeCategoryClicked" Content="R Arms" Style="{StaticResource WardrobeCategoryButton}" Tag="RightArm" />
                  <controls:SelectableButton Click="OnWardrobeCategoryClicked" Content="L Legs" Style="{StaticResource WardrobeCategoryButton}" Tag="LeftLeg" />
                  <controls:SelectableButton Click="OnWardrobeCategoryClicked" Content="R Legs" Style="{StaticResource WardrobeCategoryButton}" Tag="RightLeg" />
                  <controls:SelectableButton Click="OnWardrobeCategoryClicked" Margin="0" Content="Packages" Style="{StaticResource WardrobeCategoryButton}" Tag="Package" />
                </StackPanel>
                <StackPanel Grid.Row="2" HorizontalAlignment="Center" Orientation="Horizontal">
                  <controls:SelectableButton Click="OnShopButtonClicked" Margin="0,0,0,5" Content="Shop" Style="{StaticResource WardrobeCategoryButton}" Tag="Shop" />
                </StackPanel>
                <controls:PaginationItemsControl x:Name="UnequippedItemsControl" Grid.Row="3" Columns="4" PaginationTextFormat="Page [[[0]]] of [[[1]]]" Rows="2" MainItemsSource="{Binding Path=UnequippedCategorisedItems, Mode=OneWay}">
                  <ItemsControl.ItemTemplate>
                    <DataTemplate>
                      <Grid Row="2" MinWidth="75" MaxWidth="110" Margin="0,0,2,0">
                        <Grid.RowDefinitions>
                          <RowDefinition Height="Auto" />
                          <RowDefinition Height="Auto" />
                        </Grid.RowDefinitions>
                        <Button Grid.Row="0" HorizontalAlignment="Right" VerticalAlignment="Top" Panel.ZIndex="1" Content="[ wear ]" FontSize="10" Foreground="#AFCDE0" SnapsToDevicePixels="True" UseLayoutRounding="True" Tag="{Binding Path=Id, Mode=OneWay}" Click="OnItemWearClicked" />
                        <Border Width="75" Height="75" Background="{StaticResource ItemImageBackground}" SnapsToDevicePixels="True" UseLayoutRounding="True">
                          <controls:FancyLazyImage Grid.Row="0" HorizontalAlignment="Center" VerticalAlignment="Top" RenderOptions.BitmapScalingMode="HighQuality" ImagePath="{Binding Path=Image, Mode=OneWay}" />
                        </Border>
                        <Viewbox Grid.Row="1" Stretch="Uniform" StretchDirection="DownOnly">
                          <TextBlock HorizontalAlignment="Center" Style="{StaticResource TextBlockWhite}" TextWrapping="Wrap" Text="{Binding Path=Name, Mode=OneWay}" />
                        </Viewbox>
                      </Grid>
                    </DataTemplate>
                  </ItemsControl.ItemTemplate>
                </controls:PaginationItemsControl>
                <TextBlock Grid.Row="3" HorizontalAlignment="Center" VerticalAlignment="Center" FontSize="16" FontWeight="SemiBold" Style="{StaticResource TextBlockWhite}" Text="Looks like there's nothing here. Go to the catalog to get some items!" TextAlignment="Center" TextWrapping="Wrap" Visibility="{Binding ElementName=UnequippedItemsControl, Path=AnyPages, Converter={StaticResource BoolToVisibilityConverter}, ConverterParameter=opposite}" />
                <StackPanel Grid.Row="4" HorizontalAlignment="Left" Orientation="Horizontal" Visibility="{Binding Path=ShowCustomIdField, Converter={StaticResource BoolToVisibilityHiddenConverter}}">
                  <TextBlock Margin="0,0,2,0" VerticalAlignment="Center" FontSize="10" Style="{StaticResource TextBlockWhite}" Text="Custom:" ToolTip="Custom Asset ID" />
                  <TextBox Width="80" Margin="0,0,2,0" FontSize="10" Text="{Binding Path=CustomId, Converter={StaticResource StringToULongConverter}, ConverterParameter=0, Mode=TwoWay}" />
                  <Button Width="40" Content="Set" FontSize="10" Click="OnCustomItemSubmitClicked" />
                </StackPanel>
                <Grid Row="4" HorizontalAlignment="Center" Visibility="{Binding ElementName=UnequippedItemsControl, Path=AnyPages, Converter={StaticResource BoolToVisibilityConverter}}">
                  <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto" />
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="Auto" />
                  </Grid.ColumnDefinitions>
                  <Button Grid.Row="4" Grid.Column="0" VerticalAlignment="Center" Background="#00FFFFFF" BorderThickness="0" FontSize="12" Foreground="#AFCDE0" Style="{StaticResource ButtonNoEffects}" Command="{Binding ElementName=UnequippedItemsControl, Path=PreviousPageCommand}">
                    <StackPanel Orientation="Horizontal">
                      <TextBlock VerticalAlignment="Center" FontSize="8" FontWeight="Bold" Text="&lt;" />
                      <TextBlock Margin="-2,0,0,0" VerticalAlignment="Center" FontSize="8" FontWeight="Bold" Text="&lt;" />
                      <TextBlock Text=" Back" />
                    </StackPanel>
                  </Button>
                  <TextBlock Grid.Row="4" Grid.Column="1" Margin="5,0" HorizontalAlignment="Center" VerticalAlignment="Center" FontSize="14" Style="{StaticResource TextBlockWhite}" Text="{Binding ElementName=UnequippedItemsControl, Path=PaginationText}" />
                  <Button Grid.Row="4" Grid.Column="2" VerticalAlignment="Center" Background="#00FFFFFF" BorderThickness="0" FontSize="12" Foreground="#AFCDE0" Style="{StaticResource ButtonNoEffects}" Command="{Binding ElementName=UnequippedItemsControl, Path=NextPageCommand}">
                    <StackPanel Orientation="Horizontal">
                      <TextBlock Text="Next " />
                      <TextBlock VerticalAlignment="Center" FontSize="8" FontWeight="Bold" Text="&gt;" />
                      <TextBlock Margin="-2,0,0,0" VerticalAlignment="Center" FontSize="8" FontWeight="Bold" Text="&gt;" />
                    </StackPanel>
                  </Button>
                </Grid>
              </Grid>
              <Grid Name="MyOutfitsGrid" Visibility="{Binding Path=TabOutfitsSelected, Mode=OneWay, Converter={StaticResource BoolToVisibilityConverter}}">
                <Grid.RowDefinitions>
                  <RowDefinition Height="Auto" />
                  <RowDefinition Height="*" />
                  <RowDefinition Height="Auto" />
                </Grid.RowDefinitions>
                <controls:SelectableButton Click="OnOutfitCreateButtonClicked" Margin="0,0,0,5" HorizontalAlignment="Center" Content="Create" Style="{StaticResource WardrobeCategoryButton}" />
                <controls:PaginationItemsControl x:Name="OutfitItemsControl" Grid.Row="1" Columns="4" PaginationTextFormat="Page [[[0]]] of [[[1]]]" Rows="2" MainItemsSource="{Binding Path=Outfits, Mode=OneWay}">
                  <ItemsControl.ItemTemplate>
                    <DataTemplate>
                      <Grid MaxWidth="140" Margin="0,0,2,0">
                        <Grid.RowDefinitions>
                          <RowDefinition Height="Auto" />
                          <RowDefinition Height="Auto" />
                          <RowDefinition Height="Auto" />
                          <RowDefinition Height="Auto" />
                        </Grid.RowDefinitions>
                        <Button Grid.Row="0" Width="63" HorizontalAlignment="left" VerticalAlignment="Top" Panel.ZIndex="1" Content="[  equip  ]" FontSize="10" Foreground="#AFCDE0" SnapsToDevicePixels="True" UseLayoutRounding="True" Tag="{Binding Path=Value, Mode=OneWay}" Click="OnOutfitEquipButtonClicked" />
                        <Button Grid.Row="0" Width="63" HorizontalAlignment="Right" VerticalAlignment="Top" Panel.ZIndex="1" Content="[ options ]" FontSize="10" Foreground="#AFCDE0" SnapsToDevicePixels="True" UseLayoutRounding="True" Tag="{Binding Path=Value, Mode=OneWay}" Click="OnOutfitDetailsButtonClicked" />
                        <Grid Row="1" Width="62" Height="79" Margin="0,2,0,2">
                          <Button Width="15" Height="15" Margin="24,0,0,0" HorizontalAlignment="Left" VerticalAlignment="Top" IsEnabled="False" Style="{StaticResource ButtonNoEffects}" Background="{Binding Path=Value.Character.Head, Converter={StaticResource BrickIdToBrushConverter}, Mode=OneWay}" />
                          <Button Width="14" Height="30" Margin="0,17,0,0" HorizontalAlignment="Left" VerticalAlignment="Top" IsEnabled="False" Style="{StaticResource ButtonNoEffects}" Background="{Binding Path=Value.Character.RightArm, Converter={StaticResource BrickIdToBrushConverter}, Mode=OneWay}" />
                          <Button Width="30" Height="30" Margin="16,17,0,0" HorizontalAlignment="Left" VerticalAlignment="Top" IsEnabled="False" Style="{StaticResource ButtonNoEffects}" Background="{Binding Path=Value.Character.Torso, Converter={StaticResource BrickIdToBrushConverter}, Mode=OneWay}" />
                          <Button Width="14" Height="30" Margin="48,17,0,0" HorizontalAlignment="Left" VerticalAlignment="Top" IsEnabled="False" Style="{StaticResource ButtonNoEffects}" Background="{Binding Path=Value.Character.LeftArm, Converter={StaticResource BrickIdToBrushConverter}, Mode=OneWay}" />
                          <Button Width="14" Height="30" Margin="16,49,0,0" HorizontalAlignment="Left" VerticalAlignment="Top" IsEnabled="False" Style="{StaticResource ButtonNoEffects}" Background="{Binding Path=Value.Character.RightLeg, Converter={StaticResource BrickIdToBrushConverter}, Mode=OneWay}" />
                          <Button Width="14" Height="30" Margin="32,49,0,0" HorizontalAlignment="Left" VerticalAlignment="Top" IsEnabled="False" Style="{StaticResource ButtonNoEffects}" Background="{Binding Path=Value.Character.LeftLeg, Converter={StaticResource BrickIdToBrushConverter}, Mode=OneWay}" />
                        </Grid>
                        <TextBlock Grid.Row="2" Margin="0,0,0,2" HorizontalAlignment="Center" VerticalAlignment="Top" FontSize="10" FontWeight="Bold" Style="{StaticResource TextBlockWhite}" Text="{Binding Path=Value.Client, Mode=OneWay}" Visibility="{Binding Path=Value.Client, Mode=OneWay, Converter={StaticResource NullVisibilityConverter}}" />
                        <TextBlock Grid.Row="3" HorizontalAlignment="Center" VerticalAlignment="Top" Style="{StaticResource TextBlockWhite}" TextWrapping="Wrap" Text="{Binding Path=Value.Name, Mode=OneWay}" />
                      </Grid>
                    </DataTemplate>
                  </ItemsControl.ItemTemplate>
                </controls:PaginationItemsControl>
                <Grid Row="2" HorizontalAlignment="Center" Visibility="{Binding ElementName=OutfitItemsControl, Path=AnyPages, Converter={StaticResource BoolToVisibilityConverter}}">
                  <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto" />
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="Auto" />
                  </Grid.ColumnDefinitions>
                  <Button Grid.Row="4" Grid.Column="0" VerticalAlignment="Center" Background="#00FFFFFF" BorderThickness="0" FontSize="12" Foreground="#AFCDE0" Style="{StaticResource ButtonNoEffects}" Command="{Binding ElementName=OutfitItemsControl, Path=PreviousPageCommand}">
                    <StackPanel Orientation="Horizontal">
                      <TextBlock VerticalAlignment="Center" FontSize="8" FontWeight="Bold" Text="&lt;" />
                      <TextBlock Margin="-2,0,0,0" VerticalAlignment="Center" FontSize="8" FontWeight="Bold" Text="&lt;" />
                      <TextBlock Text=" Back" />
                    </StackPanel>
                  </Button>
                  <TextBlock Grid.Row="3" Grid.Column="1" Margin="5,0" HorizontalAlignment="Center" VerticalAlignment="Center" FontSize="14" Style="{StaticResource TextBlockWhite}" Text="{Binding ElementName=OutfitItemsControl, Path=PaginationText}" />
                  <Button Grid.Row="4" Grid.Column="2" VerticalAlignment="Center" Background="#00FFFFFF" BorderThickness="0" FontSize="12" Foreground="#AFCDE0" Style="{StaticResource ButtonNoEffects}" Command="{Binding ElementName=OutfitItemsControl, Path=NextPageCommand}">
                    <StackPanel Orientation="Horizontal">
                      <TextBlock Text="Next " />
                      <TextBlock VerticalAlignment="Center" FontSize="8" FontWeight="Bold" Text="&gt;" />
                      <TextBlock Margin="-2,0,0,0" VerticalAlignment="Center" FontSize="8" FontWeight="Bold" Text="&gt;" />
                    </StackPanel>
                  </Button>
                </Grid>
              </Grid>
            </Grid>
          </controls:StandardBoxCustomHeader>
        </Grid>
        <controls:StandardBox Grid.Row="1" Margin="0,5,0,0" HeaderText="Currently Wearing">
          <Grid>
            <Grid.RowDefinitions>
              <RowDefinition Height="Auto" />
              <RowDefinition Height="Auto" />
              <RowDefinition Height="*" />
              <RowDefinition Height="Auto" />
            </Grid.RowDefinitions>
            <controls:PaginationItemsControl x:Name="EquippedItemsControl" Grid.Row="2" Columns="4" PaginationTextFormat="Page [[[0]]] of [[[1]]]" Rows="2" MainItemsSource="{Binding Path=EquippedItems, Mode=OneWay}">
              <ItemsControl.ItemTemplate>
                <DataTemplate>
                  <Grid Row="2" MinWidth="75" MaxWidth="140" Margin="0,0,2,0">
                    <Grid.RowDefinitions>
                      <RowDefinition Height="Auto" />
                      <RowDefinition Height="Auto" />
                    </Grid.RowDefinitions>
                    <Button Grid.Row="0" HorizontalAlignment="Right" VerticalAlignment="Top" Panel.ZIndex="1" Content="[ remove ]" FontSize="10" Foreground="#AFCDE0" SnapsToDevicePixels="True" UseLayoutRounding="True" Tag="{Binding Path=Key, Mode=OneWay}" Click="OnItemRemoveClicked" />
                    <Border Width="75" Height="75" Background="{StaticResource ItemImageBackground}" SnapsToDevicePixels="True" UseLayoutRounding="True">
                      <controls:FancyLazyImage Grid.Row="0" HorizontalAlignment="Center" VerticalAlignment="Top" RenderOptions.BitmapScalingMode="HighQuality" ImagePath="{Binding Path=Value.Image, Mode=OneWay}" />
                    </Border>
                    <Viewbox Grid.Row="1" Stretch="Uniform" StretchDirection="DownOnly">
                      <TextBlock HorizontalAlignment="Center" Style="{StaticResource TextBlockWhite}" TextWrapping="Wrap" Text="{Binding Path=Value.Name, Mode=OneWay}" />
                    </Viewbox>
                  </Grid>
                </DataTemplate>
              </ItemsControl.ItemTemplate>
            </controls:PaginationItemsControl>
            <Grid Row="4" HorizontalAlignment="Center" Visibility="{Binding ElementName=EquippedItemsControl, Path=AnyPages, Converter={StaticResource BoolToVisibilityConverter}}">
              <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto" />
                <ColumnDefinition Width="*" />
                <ColumnDefinition Width="Auto" />
              </Grid.ColumnDefinitions>
              <Button Grid.Row="4" Grid.Column="0" VerticalAlignment="Center" Background="#00FFFFFF" BorderThickness="0" FontSize="12" Foreground="#AFCDE0" Style="{StaticResource ButtonNoEffects}" Command="{Binding ElementName=EquippedItemsControl, Path=PreviousPageCommand}">
                <StackPanel Orientation="Horizontal">
                  <TextBlock VerticalAlignment="Center" FontSize="8" FontWeight="Bold" Text="&lt;" />
                  <TextBlock Margin="-2,0,0,0" VerticalAlignment="Center" FontSize="8" FontWeight="Bold" Text="&lt;" />
                  <TextBlock Text=" Back" />
                </StackPanel>
              </Button>
              <TextBlock Grid.Row="3" Grid.Column="1" Margin="5,0" HorizontalAlignment="Center" VerticalAlignment="Center" FontSize="14" Style="{StaticResource TextBlockWhite}" Text="{Binding ElementName=EquippedItemsControl, Path=PaginationText}" />
              <Button Grid.Row="4" Grid.Column="2" VerticalAlignment="Center" Background="#00FFFFFF" BorderThickness="0" FontSize="12" Foreground="#AFCDE0" Style="{StaticResource ButtonNoEffects}" Command="{Binding ElementName=EquippedItemsControl, Path=NextPageCommand}">
                <StackPanel Orientation="Horizontal">
                  <TextBlock Text="Next " />
                  <TextBlock VerticalAlignment="Center" FontSize="8" FontWeight="Bold" Text="&gt;" />
                  <TextBlock Margin="-2,0,0,0" VerticalAlignment="Center" FontSize="8" FontWeight="Bold" Text="&gt;" />
                </StackPanel>
              </Button>
            </Grid>
          </Grid>
        </controls:StandardBox>
      </Grid>
    </Grid>
    <Grid Name="LimbColourSelectionModal" ZIndex="1337" Background="#7F777777" Visibility="{Binding Path=ColourSelectionModalVisibility, Mode=OneWay, FallbackValue=Collapsed}">
      <controls:StandardBox HorizontalAlignment="Center" VerticalAlignment="Center" HeaderText="{Binding Path=ColourSelectionModalTitle, Mode=OneWay}">
        <Border Height="365" SnapsToDevicePixels="True">
          <Grid Margin="5" HorizontalAlignment="Center">
            <Grid.RowDefinitions>
              <RowDefinition Height="Auto" />
              <RowDefinition Height="*" />
            </Grid.RowDefinitions>
            <ItemsControl Grid.Row="0" ItemsSource="{Binding Path=CharacterColours, Mode=OneWay}">
              <ItemsControl.ItemsPanel>
                <ItemsPanelTemplate>
                  <UniformGrid Columns="8" />
                </ItemsPanelTemplate>
              </ItemsControl.ItemsPanel>
              <ItemsControl.ItemTemplate>
                <DataTemplate>
                  <Button Width="30" Height="30" Margin="4" Style="{StaticResource ButtonNoEffects}" Background="{Binding Value}" Tag="{Binding Key}" Click="OnLimbColourClicked" />
                </DataTemplate>
              </ItemsControl.ItemTemplate>
            </ItemsControl>
            <StackPanel Grid.Row="1" VerticalAlignment="Bottom">
              <CheckBox Name="ShowOlderCharacterColours" Grid.Row="1" Margin="0,0,0,10" HorizontalAlignment="Center" Content="Use pre-2009M color palette" Checked="OnShowOlderCharacterColoursChecked" Unchecked="OnShowOlderCharacterColoursChecked" />
              <Button Grid.Row="2" Content="Cancel" Click="CloseLimbColourModalButton_Click" />
            </StackPanel>
          </Grid>
        </Border>
      </controls:StandardBox>
    </Grid>
    <Grid Name="FigureCharacterTypeModal" ZIndex="1337" Background="#7F777777" Visibility="{Binding Path=FigureCharacterTypeModalVisibility, Mode=OneWay, FallbackValue=Collapsed}">
      <controls:StandardBox HorizontalAlignment="Center" VerticalAlignment="Center" BorderThickness="1" HeaderText="Select a Figure">
        <Grid>
          <Grid.RowDefinitions>
            <RowDefinition Height="*" />
            <RowDefinition Height="Auto" />
          </Grid.RowDefinitions>
          <ItemsControl Grid.Row="0" Margin="0,0,0,5" ItemsSource="{Binding Path=FigureCharacterTypes, Mode=OneTime}">
            <ItemsControl.ItemsPanel>
              <ItemsPanelTemplate>
                <UniformGrid Columns="4" />
              </ItemsPanelTemplate>
            </ItemsControl.ItemsPanel>
            <ItemsControl.ItemTemplate>
              <DataTemplate>
                <Button Width="140" Height="140" Margin="4" Tag="{Binding .}" Click="OnFigureCharacterTypeClicked">
                  <Image RenderOptions.BitmapScalingMode="HighQuality" Source="{Binding ., Converter={StaticResource FigureCharacterTypeToImageUriConverter}}" />
                </Button>
              </DataTemplate>
            </ItemsControl.ItemTemplate>
          </ItemsControl>
          <Button Grid.Row="1" Content="Cancel" Click="CloseFigureCharacterTypeModalButtonClicked" />
        </Grid>
      </controls:StandardBox>
    </Grid>
    <Grid Name="OutfitCreateModal" ZIndex="1337" Background="#7F777777" Visibility="{Binding Path=OutfitCreateModalVisibility, Mode=OneWay}">
      <controls:StandardBox Width="500" HorizontalAlignment="Center" VerticalAlignment="Center" BorderThickness="1" HeaderText="Create New Outfit">
        <Grid>
          <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="Auto" />
            <RowDefinition Height="Auto" />
            <RowDefinition Height="Auto" />
            <RowDefinition Height="Auto" />
          </Grid.RowDefinitions>
          <GroupBox Grid.Row="0" Margin="0,0,0,5" Padding="1" Foreground="{StaticResource LinkColour}" Header="Name" SnapsToDevicePixels="True" UseLayoutRounding="True">
            <StackPanel>
              <TextBlock Margin="0,0,0,2" Style="{StaticResource TextBlockWhite}" Text="A unique name for your outfit" />
              <TextBox Text="{Binding Path=OutfitCreateName, Mode=TwoWay}" />
            </StackPanel>
          </GroupBox>
          <GroupBox Grid.Row="1" Margin="0,0,0,5" Padding="1" Foreground="{StaticResource LinkColour}" Header="Client" SnapsToDevicePixels="True" UseLayoutRounding="True">
            <StackPanel>
              <TextBlock Grid.Row="2" Margin="0,0,0,2" Style="{StaticResource TextBlockWhite}" Text="Use this outfit when launching this client" />
              <ComboBox ItemsSource="{Binding Path=OutfitClients, Mode=OneWay}" SelectedItem="{Binding Path=OutfitCreateClient, Mode=TwoWay}" />
            </StackPanel>
          </GroupBox>
          <TextBlock Grid.Row="2" Margin="0,0,0,2" FontWeight="Bold" Style="{StaticResource TextBlockRed}" TextAlignment="Center" Text="{Binding Path=OutfitCreateError, Mode=OneWay}" />
          <Button Grid.Row="3" Margin="0,0,0,5" Content="Create" FontSize="16" FontWeight="Bold" Click="OnOutfitCreateSaveClicked" />
          <Button Grid.Row="4" Content="Close" Click="OnOutfitCreateCloseClicked" />
        </Grid>
      </controls:StandardBox>
    </Grid>
    <Grid Name="OutfitDetailsModal" ZIndex="1337" Background="#7F777777" Visibility="{Binding Path=OutfitDetailsModalVisibility, Mode=OneWay}">
      <controls:StandardBox Width="750" HorizontalAlignment="Center" VerticalAlignment="Center" BorderThickness="1" HeaderText="{Binding Path=OutfitDetailsHeaderText, Mode=OneWay}">
        <Grid>
          <Grid.RowDefinitions>
            <RowDefinition Height="*" />
            <RowDefinition Height="Auto" />
          </Grid.RowDefinitions>
          <Grid.ColumnDefinitions>
            <ColumnDefinition Width="*" />
            <ColumnDefinition Width="*" />
          </Grid.ColumnDefinitions>
          <controls:StandardBox Grid.Column="0" Margin="0,0,5,0" HeaderText="Options">
            <Grid>
              <Grid.RowDefinitions>
                <RowDefinition Height="Auto" />
                <RowDefinition Height="Auto" />
                <RowDefinition Height="*" />
              </Grid.RowDefinitions>
              <GroupBox Grid.Row="0" Margin="0,0,0,5" Padding="1" Foreground="{StaticResource LinkColour}" Header="Name" SnapsToDevicePixels="True" UseLayoutRounding="True">
                <StackPanel>
                  <TextBlock Margin="0,0,0,2" Style="{StaticResource TextBlockWhite}" Text="A unique name for your outfit" />
                  <TextBox Text="{Binding Path=OutfitDetailsName, Mode=TwoWay}" />
                </StackPanel>
              </GroupBox>
              <GroupBox Grid.Row="1" Margin="0,0,0,5" Padding="1" Foreground="{StaticResource LinkColour}" Header="Client" SnapsToDevicePixels="True" UseLayoutRounding="True">
                <StackPanel>
                  <TextBlock Grid.Row="2" Margin="0,0,0,2" Style="{StaticResource TextBlockWhite}" Text="Use this outfit when launching this client" />
                  <ComboBox ItemsSource="{Binding Path=OutfitDetailsClients, Mode=OneWay}" SelectedItem="{Binding Path=OutfitDetailsClient, Mode=TwoWay}" />
                </StackPanel>
              </GroupBox>
              <StackPanel Grid.Row="2" VerticalAlignment="Bottom">
                <TextBlock Margin="0,0,0,2" FontWeight="Bold" Style="{StaticResource TextBlockRed}" TextAlignment="Center" Text="{Binding Path=OutfitDetailsError, Mode=OneWay}" />
                <TextBlock Margin="0,0,0,2" FontWeight="Bold" Style="{StaticResource TextBlockGreen}" TextAlignment="Center" Text="{Binding Path=OutfitDetailsSuccess, Mode=OneWay}" />
                <Button Margin="0,0,0,5" Content="Save" FontSize="16" FontWeight="Bold" Click="OnOutfitDetailsSaveClicked" />
                <Button Content="{Binding Path=OutfitDetailsDeleteText, Mode=OneWay}" Click="OnOutfitDetailsDeleteClicked" />
              </StackPanel>
            </Grid>
          </controls:StandardBox>
          <controls:StandardBox Grid.Column="1" Margin="5,0,0,0" HeaderText="Outfit">
            <Grid>
              <Grid.RowDefinitions>
                <RowDefinition Height="Auto" />
                <RowDefinition Height="Auto" />
              </Grid.RowDefinitions>
              <Grid Row="0">
                <Grid.ColumnDefinitions>
                  <ColumnDefinition Width="*" />
                  <ColumnDefinition Width="*" />
                </Grid.ColumnDefinitions>
                <Grid Width="122" Height="155" Margin="0,0,0,5">
                  <Button Width="30" Height="30" Margin="48,0,0,0" HorizontalAlignment="Left" VerticalAlignment="Top" IsEnabled="False" Style="{StaticResource ButtonNoEffects}" Background="{Binding Path=OutfitSelected.Character.Head, Converter={StaticResource BrickIdToBrushConverter}, Mode=OneWay}" />
                  <Button Width="26" Height="58" Margin="0,34,0,0" HorizontalAlignment="Left" VerticalAlignment="Top" IsEnabled="False" Style="{StaticResource ButtonNoEffects}" Background="{Binding Path=OutfitSelected.Character.RightArm, Converter={StaticResource BrickIdToBrushConverter}, Mode=OneWay}" />
                  <Button Width="58" Height="58" Margin="32,34,0,0" HorizontalAlignment="Left" VerticalAlignment="Top" IsEnabled="False" Style="{StaticResource ButtonNoEffects}" Background="{Binding Path=OutfitSelected.Character.Torso, Converter={StaticResource BrickIdToBrushConverter}, Mode=OneWay}" />
                  <Button Width="26" Height="58" Margin="96,34,0,0" HorizontalAlignment="Left" VerticalAlignment="Top" IsEnabled="False" Style="{StaticResource ButtonNoEffects}" Background="{Binding Path=OutfitSelected.Character.LeftArm, Converter={StaticResource BrickIdToBrushConverter}, Mode=OneWay}" />
                  <Button Width="26" Height="58" Margin="32,97,0,0" HorizontalAlignment="Left" VerticalAlignment="Top" IsEnabled="False" Style="{StaticResource ButtonNoEffects}" Background="{Binding Path=OutfitSelected.Character.RightLeg, Converter={StaticResource BrickIdToBrushConverter}, Mode=OneWay}" />
                  <Button Width="26" Height="58" Margin="64,97,0,0" HorizontalAlignment="Left" VerticalAlignment="Top" IsEnabled="False" Style="{StaticResource ButtonNoEffects}" Background="{Binding Path=OutfitSelected.Character.LeftLeg, Converter={StaticResource BrickIdToBrushConverter}, Mode=OneWay}" />
                </Grid>
                <Image Grid.Column="1" RenderOptions.BitmapScalingMode="HighQuality" Source="{Binding Path=FigureCharacterType, Converter={StaticResource FigureCharacterTypeToImageUriConverter}, Mode=OneWay}" />
              </Grid>
              <TextBox Grid.Row="1" IsReadOnly="True" ScrollViewer.CanContentScroll="False" Text="{Binding Path=OutfitDetailsWearingText, Mode=OneWay}" />
            </Grid>
          </controls:StandardBox>
          <Button Grid.Row="1" Grid.ColumnSpan="2" Margin="0,5,0,0" Content="Close" FontSize="14" Click="OnOutfitDetailsCloseClicked" />
        </Grid>
      </controls:StandardBox>
    </Grid>
    <Grid Name="CharacterRenderModal" ZIndex="1337" Background="#7F777777" Visibility="{Binding Path=CharacterRenderModalVisibility, Mode=OneWay}">
      <controls:StandardBox HorizontalAlignment="Center" VerticalAlignment="Center" BorderThickness="1" HeaderText="Character Preview">
        <Grid>
          <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="Auto" />
            <RowDefinition Height="Auto" />
          </Grid.RowDefinitions>
          <Image Width="500" Height="500" Margin="0,0,0,5" RenderOptions.BitmapScalingMode="LowQuality" RenderOptions.EdgeMode="Aliased" SnapsToDevicePixels="True" UseLayoutRounding="True" Source="{Binding Path=CharacterImage, Mode=OneWay}" />
          <Button Grid.Row="1" Margin="0,0,0,5" Content="Save" FontSize="18" Click="OnCharacterSaveClicked" />
          <Button Grid.Row="2" Content="Close" Click="OnCharacterRenderModalCloseClicked" />
        </Grid>
      </controls:StandardBox>
    </Grid>
  </Grid>
</local:BasePage>